{"version":3,"sources":["../src/init.js"],"names":[],"mappings":";;;;;;;;;;;;;;AASA,MAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;AACzC,IAAE,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,IAAI,WAAW,CAAA,CAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,gCAAgC,CAAA;AAC/F,UAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAA;;AAE7B,WAAS,iBAAiB,GAAG;;;;;;AAC3B,2BAAiB,WAVV,GAAG,EAUW,iBAAiB,CAAC,8HAAE;YAAhC,IAAI;YACM,QAAQ,GAAK,IAAI,CAA5B,SAAS;;AAEf,gBAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAA;AACvC,YAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;AACxB,cAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;AACtC,cAAI,IAAI,GAAG,IAAI,MAAM,SAAO,UAAU,CAAC,KAAK,OAAI,CAAA;;AAEhD,cAAI,UAAU,EACZ,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,UAAA,IAAI;mBAAI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;WAAA,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SACjF;;AAED,YAAI,CAAC,SAAS,GAAG,yBAAO,QAAQ,CAAC,CAAA;AACjC,YAAI,CAAC,eAAe,CAAC,eAAe,CAAC,CAAA;OACtC;;;;;;;;;;;;;;;GACF;;AAED,WAAS,WAAW,GAAG;;;;;;AACrB,4BAAiB,WA5BV,GAAG,EA4BW,gBAAgB,CAAC,mIAAE;YAA/B,IAAI;YACL,OAAO,GAAK,IAAI,CAAC,OAAO,CAAxB,OAAO;;mBAGa,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE;;;;;YAFrD,KAAK,2BAAG,QAAQ;;YAChB,MAAM,2BAAG,OAAO;;YAChB,QAAQ,2BAAG,IAAI;;AAErB,YAAI,IAAI,CAAC,OAAO,EACd,IAAI,CAAC,OAAO,CAAC,CACX,EAAE,IAAI,EAAE,KAAK,EAAE,EACf,EAAE,IAAI,EAAE,MAAM,EAAE,CACjB,EAAE,EAAE,QAAQ,EAAR,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,OAAO,EAAE,CAAC,CAAA;OAChE;;;;;;;;;;;;;;;;;;;;;AAED,4BAAiB,WAzCV,GAAG,EAyCW,cAAc,CAAC,mIAAE;YAA7B,IAAI;;AACX,YAAI,IAAI,CAAC,OAAO,EACd,IAAI,CAAC,OAAO,CAAC,CAAE,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAG,EAAE;AACpD,kBAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,GAAG;AACnC,mBAAS,EAAE,WAAW;AACtB,oBAAU,EAAE,OAAO;AACnB,gBAAM,EAAE,aAAa;SACtB,CAAC,CAAA;OACL;;;;;;;;;;;;;;;GACF;;AAED,WAAS,+BAA+B,GAAG;AACzC,QAAI,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;AACvC,QAAI,CAAE,GAAG,CAAC,OAAO,EACf,WAvDU,GAAG,EAuDT,iBAAiB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAA;GACjD;;AAED,WAAS,UAAU,GAAG;AACpB,QAAI,KAAK,GAAG,WA3DL,GAAG,EA2DM,oBAAoB,CAAC,CAAA;AACrC,SAAK,CAAC,OAAO,CAAC,UAAA,IAAI,EAAI;AACpB,UAAI,CAAE,IAAI,UAAO,EAAE;;AAEjB,eAAM;OACP;;AAED,UAAI,KAAK,GAAG,WAlEP,GAAG,EAkEQ,IAAI,UAAO,EAAE,SAAS,CAAC,CAAA;AACvC,WAAK,CAAC,OAAO,CAAC,UAAA,IAAI,EAAI;AACpB,YAAI,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;OACzC,CAAC,CAAA;KACH,CAAC,CAAA;GACH;;AAED,WAAS,gBAAgB,GAAG;AAC1B,QAAI,CAAE,QAAQ,CAAC,iBAAiB,IAC5B,CAAE,QAAQ,CAAC,oBAAoB,IAC/B,CAAE,QAAQ,CAAC,uBAAuB,IAClC,CAAE,QAAQ,CAAC,mBAAmB,EAClC;AACE,UAAI,QAAQ,CAAC,eAAe,CAAC,iBAAiB,EAC5C,QAAQ,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAA,KACzC,IAAI,QAAQ,CAAC,eAAe,CAAC,mBAAmB,EACnD,QAAQ,CAAC,eAAe,CAAC,mBAAmB,EAAE,CAAA,KAC3C,IAAI,QAAQ,CAAC,eAAe,CAAC,oBAAoB,EACpD,QAAQ,CAAC,eAAe,CAAC,oBAAoB,EAAE,CAAA,KAC5C,IAAI,QAAQ,CAAC,eAAe,CAAC,uBAAuB,EACvD,QAAQ,CAAC,eAAe,CAAC,uBAAuB,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAA;KACjF,MACI;AACH,UAAI,QAAQ,CAAC,cAAc,EACzB,QAAQ,CAAC,cAAc,EAAE,CAAA,KACtB,IAAI,QAAQ,CAAC,gBAAgB,EAChC,QAAQ,CAAC,gBAAgB,EAAE,CAAA,KACxB,IAAI,QAAQ,CAAC,mBAAmB,EACnC,QAAQ,CAAC,mBAAmB,EAAE,CAAA,KAC3B,IAAI,QAAQ,CAAC,oBAAoB,EACpC,QAAQ,CAAC,oBAAoB,EAAE,CAAA;KAClC;GACF;;AAED,WAAS,IAAI,GAAG;AACd,wBAAO,UAAU,CAAC;AAChB,eAAS,EAAA,mBAAC,IAAI,EAAE;;AAEd,YAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAA;AACvD,eAAO,yBAAY,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,KAAK,CAAA;OACvD;KACF,CAAC,CAAA;;AAEF,mCAA+B,EAAE,CAAA;AACjC,cAAU,EAAE,CAAA;AACZ,qBAAiB,EAAE,CAAA;AACnB,eAAW,EAAE,CAAA;AACb,gBA/GO,IAAI,GA+GC,CAAA;AACZ,cAjHgC,QAAQ,GAiH9B,CAAA;;AAEV,UAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAA,KAAK,EAAI;AAC1C,UAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EACtB,YApHuB,WAAW,EAoHtB,CAAC,CAAC,CAAA,KACX,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EAC3B,YAtHuB,WAAW,EAsHtB,CAAC,CAAC,CAAC,CAAA,KACZ,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EAC3B,gBAAgB,EAAE,CAAA;;AAEpB,gBA3HK,uBAAuB,GA2HH,CAAA;KAC1B,CAAC,CAAA;;AAEF,eA/HY,GAAG,EA+HX,MAAM,CAAC,CAAC,SAAS,GAAG,EAAE,CAAA;GAC3B;;AAED,MAAI,QAAQ,CAAC,UAAU,IAAI,UAAU,IAAI,QAAQ,CAAC,UAAU,IAAI,QAAQ,EACtE,IAAI,EAAE,CAAA,KAEN,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAA","file":"src/init.js","sourcesContent":["import highlightjs from 'highlightjs'\nimport marked from 'marked'\nimport _ from 'lodash'\n\nimport { all, one } from './utils'\nimport { highlightActiveMenuItem, initMenu } from './menu'\nimport { init as initSlides, changeSlide } from './slides'\n\n// livereload\nvar js = document.createElement('script')\njs.src = '//' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1'\ndocument.body.appendChild(js)\n\nfunction translateMarkdown() {\n  for (var node of all('[data-markdown]')) {\n    var { innerHTML: markdown } = node\n\n    markdown = markdown.replace(/^\\n+/, '')\n    if (/^ +/.test(markdown)) {\n      var nonWsMatch = /[^ ]/.exec(markdown)\n      var repl = new RegExp(`^ {${nonWsMatch.index}}`)\n\n      if (nonWsMatch)\n        markdown = markdown.split('\\n').map(line => line.replace(repl, '')).join('\\n')\n    }\n\n    node.innerHTML = marked(markdown)\n    node.removeAttribute('data-markdown')\n  }\n}\n\nfunction initEffects() {\n  for (var node of all('[data-marquee]')) {\n    var { marquee } = node.dataset\n    var [ first = '-100px',\n          second = '100px',\n          duration = 1000 ] = marquee ? marquee.split(':') : []\n\n    if (node.animate)\n      node.animate([\n        { left: first },\n        { left: second },\n      ], { duration, direction: 'alternate', iterations: 9999999 })\n  }\n\n  for (var node of all('[data-blink]')) {\n    if (node.animate)\n      node.animate([ { opacity: '0' }, { opacity: '1' }, ], {\n        duration: node.dataset.blink || 400,\n        direction: 'alternate',\n        iterations: 9999999,\n        easing: 'step-middle'\n      })\n  }\n}\n\nfunction showWarningToUnsupportedBrowser() {\n  var div = document.createElement('div')\n  if (! div.animate)\n    one('.intro .warning').style.display = 'block'\n}\n\nfunction runImports() {\n  var links = all('link[rel=\"import\"]')\n  links.forEach(link => {\n    if (! link.import) {\n      // TODO: load using ajax for browsers that don't support html5 imports\n      return\n    }\n\n    var nodes = all(link.import, 'body >*')\n    nodes.forEach(node => {\n      link.parentNode.insertBefore(node, link)\n    })\n  })\n}\n\nfunction toggleFullScreen() {\n  if (! document.fullscreenElement &&\n      ! document.mozFullScreenElement &&\n      ! document.webkitFullscreenElement &&\n      ! document.msFullscreenElement )\n  {\n    if (document.documentElement.requestFullscreen)\n      document.documentElement.requestFullscreen()\n    else if (document.documentElement.msRequestFullscreen)\n      document.documentElement.msRequestFullscreen()\n    else if (document.documentElement.mozRequestFullScreen)\n      document.documentElement.mozRequestFullScreen()\n    else if (document.documentElement.webkitRequestFullscreen)\n      document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)\n  }\n  else {\n    if (document.exitFullscreen)\n      document.exitFullscreen()\n    else if (document.msExitFullscreen)\n      document.msExitFullscreen()\n    else if (document.mozCancelFullScreen)\n      document.mozCancelFullScreen()\n    else if (document.webkitExitFullscreen)\n      document.webkitExitFullscreen()\n  }\n}\n\nfunction init() {\n  marked.setOptions({\n    highlight(code) {\n      // to avoid double escaping\n      code = code.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\n      return highlightjs.highlight('javascript', code).value\n    }\n  })\n\n  showWarningToUnsupportedBrowser()\n  runImports()\n  translateMarkdown()\n  initEffects()\n  initSlides()\n  initMenu()\n\n  window.addEventListener('keydown', event => {\n    if (event.keyCode === 39)\n      changeSlide(1)\n    else if (event.keyCode === 37)\n      changeSlide(-1)\n    else if (event.keyCode === 70)\n      toggleFullScreen()\n\n    highlightActiveMenuItem()\n  })\n\n  one('body').className = ''\n}\n\nif (document.readyState == 'complete' || document.readyState == 'loaded')\n  init()\nelse\n  document.addEventListener('DOMContentLoaded', init)\n"]}