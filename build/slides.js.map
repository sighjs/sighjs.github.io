{"version":3,"sources":["../src/slides.js"],"names":[],"mappings":"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","file":"src/slides.js","sourcesContent":["import { all, one } from './utils'\nimport ArrayOfArrays from './array-of-arrays'\n\n// the class names of all slides in order\nexport var allSlides = []\n// name of active slide\nvar activeSlide\n\n// activations within slide\nvar sequences\nvar sequenceIdx\n\nexport function activateSlide(name) {\n  if (activeSlide)\n    one(`.${activeSlide}`).style.display = 'none'\n\n  activeSlide = name\n  window.localStorage.setItem('active', name)\n  var slide = one(`.${name}`)\n  slide.style.display = ''\n\n  sequenceIdx = 0\n  sequences = new ArrayOfArrays\n  for (var seqNode of all(slide, '[data-seq]')) {\n    var seqs = parseSequence(seqNode)\n    seqNode.style.display = 'none'\n\n    seqs.forEach(seq => {\n      sequences.add(seq.idx, { type: seq.type, node: seqNode })\n    })\n  }\n\n  activateSequence(true)\n}\n\nfunction parseSequence(node) {\n  var seqs = []\n  var seqDescs = node.dataset.seq.split('-')\n\n  // format: \"number\"\n  if (seqDescs.length === 1) {\n    seqs.push({ idx: seqDescs[0] || 0, type: 'once' })\n  }\n  else {\n    seqs.push({ idx: seqDescs[0] || 0, type: 'on' })\n\n    // if not format \"number-\"\n    if (seqDescs[1] !== undefined)\n      seqs.push({ idx: seqDescs[1], type: 'off' })\n  }\n\n  return seqs\n}\n\n// activates sequences at sequenceIdx\nfunction activateSequence(activate) {\n  if (activate && sequenceIdx > 0) {\n    // deactivate 'once' items from previous index\n    var prevSeqs = sequences.get(sequenceIdx - 1)\n    if (prevSeqs) {\n      prevSeqs.forEach(({type, node}) => {\n        if (type === 'once')\n          node.style.display = 'none'\n      })\n    }\n  }\n\n  var seqs = sequences.get(sequenceIdx)\n  if (seqs)\n    seqs.forEach(({type, node}) => {\n      if ((! activate && type === 'off') || (activate && (type === 'on' || type === 'once')))\n        node.style.display = ''\n      else\n        node.style.display = 'none'\n    })\n}\n\n/**\n * Go forwards or backwards a slide.\n * @param {Number} offset Must be -1 or 1\n */\nexport function changeSlide(offset) {\n  var nextSequence = sequenceIdx + offset\n  if (offset > 0 && nextSequence < sequences.length) {\n    ++sequenceIdx\n    activateSequence(true)\n  }\n  else if (offset < 0 && nextSequence >= 0) {\n    activateSequence(false)\n    --sequenceIdx\n  }\n  else {\n    var activeIdx = allSlides.indexOf(activeSlide)\n    activeIdx += offset\n    if (activeIdx >= 0 && activeIdx < allSlides.length)\n      activateSlide(allSlides[activeIdx])\n  }\n}\n\nexport function activeIndex() {\n  return allSlides.indexOf(activeSlide)\n}\n\nexport function init(parentSelector = 'body') {\n  var sections = all(`${parentSelector}>section`)\n  allSlides = sections.map(node => node.className.split(' ')[0])\n\n  sections.forEach(section => { section.style.display = 'none' })\n  activateSlide(window.localStorage.getItem('active') || 'intro')\n}\n"]}